{"version":3,"sources":["webpack:///./src/views/my/securityCenter.vue?7c30","webpack:///src/views/my/securityCenter.vue","webpack:///./src/views/my/securityCenter.vue?2d36","webpack:///./src/views/my/securityCenter.vue","webpack:///./node_modules/_@babel_runtime@7.10.5@@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/_@babel_runtime@7.10.5@@babel/runtime/helpers/esm/createClass.js","webpack:///./src/assets/js/validForm.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","$event","$router","go","openPopup","cancelAccount","exitLogin","_v","model","value","callback","$$v","ishas","expression","changePassword","pwds","$set","staticRenderFns","component","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_createClass","protoProps","staticProps","prototype","ValidForm","validUserFormReg","nickName","reg","msg","phone","password","oldPassword","email","code","o","test"],"mappings":"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","file":"js/chunk-750a2ed1.1b852cd5.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"outBox\"},[_c('van-nav-bar',{attrs:{\"title\":\"安全中心\",\"left-text\":\"返回\",\"left-arrow\":\"\"},on:{\"click-left\":function($event){return _vm.$router.go(-1)}}}),_c('div',{staticClass:\"list-box\"},[_c('van-cell-group',[_c('van-cell',{attrs:{\"title\":\"修改密码\",\"is-link\":\"\"},on:{\"click\":_vm.openPopup}}),_c('van-cell',{attrs:{\"title\":\"注销账号\",\"is-link\":\"\"},on:{\"click\":_vm.cancelAccount}})],1)],1),_c('div',{staticClass:\"logout\"},[_c('van-button',{attrs:{\"round\":true,\"block\":true,\"type\":\"danger\"},on:{\"click\":_vm.exitLogin}},[_vm._v(\"退出登录\")])],1),_c('van-popup',{attrs:{\"position\":\"bottom\",\"round\":\"\"},model:{value:(_vm.ishas),callback:function ($$v) {_vm.ishas=$$v},expression:\"ishas\"}},[_c('div',{staticClass:\"v-popup\"},[_c('van-form',{on:{\"submit\":_vm.changePassword}},[_c('van-field',{attrs:{\"label\":\"旧密码\",\"placeholder\":\"旧密码\"},model:{value:(_vm.pwds.oldPassword),callback:function ($$v) {_vm.$set(_vm.pwds, \"oldPassword\", $$v)},expression:\"pwds.oldPassword\"}}),_c('van-field',{attrs:{\"type\":\"text\",\"label\":\"新密码\",\"placeholder\":\"新密码\"},model:{value:(_vm.pwds.password),callback:function ($$v) {_vm.$set(_vm.pwds, \"password\", $$v)},expression:\"pwds.password\"}}),_c('div',{staticClass:\"btn-box\"},[_c('van-button',{attrs:{\"round\":\"\",\"block\":\"\",\"native-type\":\"submit\"}},[_vm._v(\"提交\")])],1)],1)],1)])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"outBox\">\r\n    <van-nav-bar\r\n      title=\"安全中心\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      @click-left=\"$router.go(-1)\"\r\n    />\r\n  <!--  -->\r\n    <div class=\"list-box\">\r\n      <van-cell-group>\r\n        <van-cell title=\"修改密码\" is-link @click=\"openPopup\" />\r\n        <van-cell title=\"注销账号\" is-link  @click=\"cancelAccount\"/>\r\n      </van-cell-group>\r\n    </div>\r\n    <div class=\"logout\">\r\n      <van-button :round=\"true\" :block=\"true\" type=\"danger\" @click=\"exitLogin\">退出登录</van-button>\r\n    </div>\r\n    <van-popup v-model=\"ishas\" position=\"bottom\" round >\r\n      <div class=\"v-popup\">\r\n        <van-form @submit=\"changePassword\">\r\n          <van-field\r\n            v-model=\"pwds.oldPassword\"\r\n            label=\"旧密码\"\r\n            placeholder=\"旧密码\"\r\n          />\r\n          <van-field\r\n            v-model=\"pwds.password\"\r\n            type=\"text\"\r\n            label=\"新密码\"\r\n            placeholder=\"新密码\"\r\n          />\r\n          <div class=\"btn-box\">\r\n            <van-button round block  native-type=\"submit\">提交</van-button>\r\n          </div>\r\n        </van-form>\r\n      </div>\r\n    </van-popup>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n    import '../../assets/less/securityCenter.less'\r\n    import ValidForm from '../../assets/js/validForm.js'\r\nexport default {\r\n    data(){\r\n      return {\r\n        ishas: false,//控制popup框显隐\r\n        pwds: {\r\n          oldPassword: '',\r\n          password: ''\r\n        }\r\n      }\r\n    },\r\n    created(){\r\n\r\n    },\r\n    methods:{\r\n      //显示修改密码框\r\n      openPopup() {\r\n        this.ishas = true;\r\n      },\r\n\r\n      //修改密码\r\n      changePassword(){\r\n        //调用\r\n        if (!ValidForm.validUserForm(this.pwds)) {\r\n          \r\n          return;\r\n        }\r\n\r\n        let tokenString = localStorage.getItem(\"__Tk\");\r\n\r\n        this.$toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          duration: 0\r\n        });\r\n\r\n        this.axios({\r\n          method: \"POST\",\r\n          url: \"/updatePassword\",\r\n          data: {\r\n            appkey: this.appkey,\r\n            tokenString,\r\n            //新的密码\r\n            password: this.pwds.password,\r\n            //旧密码\r\n            oldPassword: this.pwds.oldPassword\r\n          }\r\n        })\r\n          .then(result => {\r\n            this.$toast.clear();\r\n            \r\n            //关闭修改密码弹出框\r\n            this.ishas = false;\r\n            if (result.data.code == 'E001') {\r\n              //清除token\r\n              localStorage.removeItem('__Tk');\r\n              this.$router.push({name: 'login'});\r\n            } else {\r\n              this.$toast(result.data.msg);\r\n            }\r\n            \r\n          })\r\n          .catch(() => {\r\n            this.$toast.clear();\r\n            \r\n          });\r\n      },\r\n\r\n      //退出登录\r\n      exitLogin(){\r\n        let tokenString = localStorage.getItem(\"__Tk\");\r\n\r\n        this.$toast.loading({\r\n          message: \"加载中...\",\r\n          forbidClick: true,\r\n          duration: 0\r\n        });\r\n\r\n        this.axios({\r\n          method: \"POST\",\r\n          url: \"/logout\",\r\n          data: {\r\n            appkey: this.appkey,\r\n            tokenString,\r\n          }\r\n        })\r\n          .then(result => {\r\n            this.$toast.clear();\r\n            \r\n            if(result.data.code == \"F001\"){\r\n              //设置更换背景和登录按钮的显隐\r\n              localStorage.setItem('isloginCbg','')\r\n              localStorage.removeItem(\"__Tk\");\r\n              this.$router.go(-1)\r\n              \r\n            }\r\n            \r\n          })\r\n          .catch(() => {\r\n            this.$toast.clear();\r\n            \r\n          });\r\n      },\r\n\r\n      //&注销账号\r\n      cancelAccount(){\r\n        this.$dialog.confirm({\r\n          title: '注销账号',\r\n          message: '账号注销，数据无法恢复。',\r\n        })\r\n          .then(() => {\r\n\r\n          let tokenString = localStorage.getItem(\"__Tk\");\r\n            this.$toast.loading({\r\n            message: \"加载中...\",\r\n            forbidClick: true,\r\n            duration: 0\r\n          });\r\n\r\n          this.axios({\r\n            method: \"POST\",\r\n            url: \"/destroyAccount\",\r\n            data: {\r\n              appkey: this.appkey,\r\n              tokenString\r\n            }\r\n          })\r\n            .then(result => {\r\n              this.$toast.clear();\r\n              \r\n\r\n              if (result.data.code == 'G001') {\r\n                //删除token\r\n                localStorage.removeItem('__Tk');\r\n                this.$router.push({name: 'login'});\r\n              } else {\r\n                this.$toast(result.data.msg);\r\n              }\r\n            })\r\n            .catch(() => {\r\n              this.$toast.clear();\r\n              \r\n              \r\n            });\r\n          })\r\n          .catch(() => {\r\n            // on cancel\r\n          });\r\n      }\r\n\r\n     \r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n</style>","import mod from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./securityCenter.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/_thread-loader@2.1.3@thread-loader/dist/cjs.js!../../../node_modules/_babel-loader@8.1.0@babel-loader/lib/index.js!../../../node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/index.js??vue-loader-options!./securityCenter.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./securityCenter.vue?vue&type=template&id=9e063552&scoped=true&\"\nimport script from \"./securityCenter.vue?vue&type=script&lang=js&\"\nexport * from \"./securityCenter.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/_vue-loader@15.9.3@vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"9e063552\",\n  null\n  \n)\n\nexport default component.exports","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","import {Toast} from 'vant'\r\nclass ValidForm {\r\n    constructor() {\r\n        this.validUserFormReg = {\r\n            //昵称， 1-10个字符, 汉字字母数字_组合\r\n            nickName: {\r\n                reg: /^[\\u4e00-\\u9fa5\\w]{1,10}$/,\r\n                msg: '昵称格式不正确'\r\n            },\r\n\r\n            //手机号\r\n            phone: {\r\n                reg: /^1[3-9]\\d{9}$/,\r\n                msg: '手机号格式不正确'\r\n            },\r\n\r\n            //密码\r\n            password: {\r\n                reg: /^[a-zA-Z]\\w{5,15}$/,\r\n                msg: '密码格式不正确且以字母开头'\r\n            },\r\n            //旧密码\r\n            oldPassword: {\r\n                reg: /^[a-zA-Z]\\w{5,15}$/,\r\n                msg: '旧密码格式不正确且以字母开头'\r\n            },\r\n            //邮箱验证\r\n            email: {\r\n                reg: /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/,\r\n                msg: '邮箱格式不正确'\r\n            },\r\n            //6位数字验证码\r\n            code: {\r\n                reg: /^\\d{6}$/,\r\n                msg: '验证格式正确'\r\n            }\r\n        }\r\n    }\r\n\r\n    //验证表单\r\n    validUserForm(o) {\r\n        //o：验证表单数据, 类型：object\r\n\r\n        for (let key in o) {\r\n            if (!this.validUserFormReg[key].reg.test(o[key])) {\r\n                Toast(this.validUserFormReg[key].msg);\r\n                return false;\r\n            }\r\n        }\r\n\r\n        //表单验证通过\r\n        return true;\r\n    }\r\n}\r\nexport default new ValidForm();\r\n"],"sourceRoot":""}