(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d80826f4"],{"064b":function(t,e){t.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"08ba":function(t,e,a){var i=a("d890"),r=a("064b"),s=a("3c10"),n=a("0fc1");for(var o in r){var c=i[o],l=c&&c.prototype;if(l&&l.forEach!==s)try{n(l,"forEach",s)}catch(d){l.forEach=s}}},"26fc":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("van-tabbar",{attrs:{"active-color":"#f80"},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.lists,(function(e,i){return a("van-tabbar-item",{key:i,attrs:{replace:""},on:{click:function(a){return t.goRouter(e.name)}},scopedSlots:t._u([{key:"icon",fn:function(){return[a("i",{staticClass:"fa fa-lg",class:e.icon,attrs:{"aria-hidden":"true"}})]},proxy:!0}],null,!0)},[a("span",[t._v(t._s(e.title))])])})),1)],1)},r=[],s=(a("ecb4"),{data:function(){return{active:0,lists:[{title:"菜单",icon:"fa-bars",name:"menu",url:"menu"},{title:"订单",icon:"fa-indent",name:"order",url:"order"},{title:"购物车",icon:"fa-shopping-cart",name:"shopcart",url:"shopcart"},{title:"我的",icon:"fa-user",name:"my",url:"my"}]}},methods:{goRouter:function(t){this.$router.push({name:t})}},created:function(){for(var t=location.hash,e=0;e<this.lists.length;e++)t.indexOf(this.lists[e].url)>0&&(this.active=e)}}),n=s,o=a("9ca4"),c=Object(o["a"])(n,i,r,!1,null,"e038813e",null);e["a"]=c.exports},"2f92":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"outBox"},[a("van-tabs",{attrs:{swipeable:"",sticky:"","title-active-color":"#f80"},on:{change:t.toggleOrderType},model:{value:t.active,callback:function(e){t.active=e},expression:"active"}},t._l(t.tabContent,(function(e,i){return a("van-tab",{key:i,attrs:{title:e.title}},[a("div",{staticClass:"order-content"},[a("div",{staticClass:"order-items"},[t.orderCode.length<=0?a("van-empty",{attrs:{description:"暂无订单数据，快去下单吧。"}}):t._l(t.orderCode,(function(e,i){return a("div",{key:i,staticClass:"order-item"},[a("div",{staticClass:"order-item-title"},[a("div",{staticClass:"fl order-no"},[t._v(t._s(e))]),2==t.everyoneOrderData[e].status?a("div",{staticClass:"fr"},[a("span",{staticClass:"confirm fl afterConfirm"},[t._v("已收货")]),a("span",{staticClass:"delete fl",on:{click:function(a){return t.delOrder(e)}}},[a("van-icon",{staticClass:"delete-icon",attrs:{name:"delete"}})],1)]):a("div",{staticClass:"fr"},[a("span",{staticClass:"confirm beforeConfirm",on:{click:function(a){return t.confirmProduct(e)}}},[t._v("确认收货")])])]),t._l(t.everyoneOrderData[e].data,(function(e,i){return a("div",{key:i,staticClass:"items"},[a("div",{staticClass:"clearfix"},[a("div",{staticClass:"fl pro-img"},[a("img",{staticClass:"auto-img",attrs:{src:e.smallImg,alt:""}})]),a("div",{staticClass:"fl pro-info"},[a("div",{staticClass:"fl"},[a("div",{staticClass:"names"},[a("div",{staticClass:"zh-name"},[t._v(t._s(e.name))]),a("div",{staticClass:"en-name"},[t._v(t._s(e.enname))])]),a("div",{staticClass:"rule"},[t._v(t._s(e.rule))])]),a("div",{staticClass:"fr"},[a("div",{staticClass:"price"},[t._v("￥"+t._s(e.price))]),a("div",{staticClass:"count"},[t._v("x"+t._s(e.count))])])])])])})),a("div",{staticClass:"order-total clearfix"},[a("div",{staticClass:"order-date fl"},[t._v(t._s(t._f("formatDate")(t.everyoneOrderData[e].createdAt,"yyyy-MM-DD hh:mm:ss")))]),a("div",{staticClass:"fr clearfix"},[a("span",{staticClass:"fl total-count"},[t._v("共计 "+t._s(t.everyoneOrderData[e].count)+" 件商品 合计：")]),a("span",{staticClass:"fl total-price"},[t._v("￥"+t._s(t.everyoneOrderData[e].total))])])])],2)}))],2)])])})),1),a("tabbar")],1)},r=[],s=(a("fe59"),a("ecb4"),a("ea69"),a("08ba"),a("be7a"),a("26fc")),n={data:function(){return{active:"0",isRecieve:!1,orderCode:[],everyoneOrderData:{},tabContent:[{title:"全部"},{title:"待收货"},{title:"已收货"}]}},components:{tabbar:s["a"]},created:function(){this.findOrder(),localStorage.getItem("__Tk")||localStorage.setItem("isloginCbg","")},methods:{toggleOrderType:function(){this.findOrder()},findOrder:function(){var t=this,e=localStorage.getItem("__Tk");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findOrder",params:{appkey:this.appkey,tokenString:e,status:this.active}}).then((function(e){if(t.$toast.clear(),7e4==e.data.code){e.data.result.sort((function(t,e){return new Date(e.createdAt).getTime()-new Date(t.createdAt).getTime()}));var a=[];e.data.result.forEach((function(t){a.indexOf(t.oid)<0&&a.push(t.oid)})),t.orderCode=a;var i={};e.data.result.forEach((function(t){i[t.oid]?(i[t.oid].count+=t.count,i[t.oid].total+=t.count*t.price,i[t.oid].data.push(t)):i[t.oid]={data:[t],status:t.status,count:t.count,total:t.count*t.price,createdAt:t.createdAt}})),t.everyoneOrderData=i}})).catch((function(){t.$toast.clear()}))},confirmProduct:function(t){var e=this,a=localStorage.getItem("__Tk");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/receive",data:{appkey:this.appkey,tokenString:a,oid:t}}).then((function(a){if(e.$toast.clear(),8e4==a.data.code&&(e.everyoneOrderData[t].status=2,1==e.active)){var i=e.orderCode.indexOf(t);e.orderCode.splice(i,1)}})).catch((function(){e.$toast.clear()}))},delOrder:function(t){var e=this,a=localStorage.getItem("__Tk");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/removeOrder",data:{appkey:this.appkey,tokenString:a,oid:t}}).then((function(a){if(e.$toast.clear(),9e4==a.data.code){var i=e.orderCode.indexOf(t);e.orderCode.splice(i,1)}})).catch((function(){e.$toast.clear()}))}}},o=n,c=a("9ca4"),l=Object(c["a"])(o,i,r,!1,null,"5e39be96",null);e["default"]=l.exports},"3c10":function(t,e,a){"use strict";var i=a("5dfd").forEach,r=a("d7e1"),s=a("ff9c"),n=r("forEach"),o=s("forEach");t.exports=n&&o?[].forEach:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}},be7a:function(t,e,a){},d7e1:function(t,e,a){"use strict";var i=a("efe2");t.exports=function(t,e){var a=[][t];return!!a&&i((function(){a.call(null,e||function(){throw 1},1)}))}},ea69:function(t,e,a){"use strict";var i=a("1c8b"),r=a("e1d6"),s=a("3da3"),n=a("d88d"),o=a("3553"),c=a("1ca1"),l=a("1bbd"),d=a("1ea7"),f=a("ff9c"),u=d("splice"),v=f("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min,p=9007199254740991,C="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!u||!v},{splice:function(t,e){var a,i,d,f,u,v,g=o(this),y=n(g.length),b=r(t,y),_=arguments.length;if(0===_?a=i=0:1===_?(a=0,i=y-b):(a=_-2,i=m(h(s(e),0),y-b)),y+a-i>p)throw TypeError(C);for(d=c(g,i),f=0;f<i;f++)u=b+f,u in g&&l(d,f,g[u]);if(d.length=i,a<i){for(f=b;f<y-i;f++)u=f+i,v=f+a,u in g?g[v]=g[u]:delete g[v];for(f=y;f>y-i+a;f--)delete g[f-1]}else if(a>i)for(f=y-i;f>b;f--)u=f+i-1,v=f+a-1,u in g?g[v]=g[u]:delete g[v];for(f=0;f<a;f++)g[f+b]=arguments[f+2];return g.length=y-i+a,d}})},ecb4:function(t,e,a){"use strict";var i=a("1c8b"),r=a("45af").indexOf,s=a("d7e1"),n=a("ff9c"),o=[].indexOf,c=!!o&&1/[1].indexOf(1,-0)<0,l=s("indexOf"),d=n("indexOf",{ACCESSORS:!0,1:0});i({target:"Array",proto:!0,forced:c||!l||!d},{indexOf:function(t){return c?o.apply(this,arguments)||0:r(this,t,arguments.length>1?arguments[1]:void 0)}})},fe59:function(t,e,a){"use strict";var i=a("1c8b"),r=a("3c10");i({target:"Array",proto:!0,forced:[].forEach!=r},{forEach:r})}}]);
//# sourceMappingURL=chunk-d80826f4.14016aa6.js.map